# jQuery类库

jQuery如此强大和好用，关键得益于以下特性：
* 丰富强大的语法（CSS选择器），用来查询文档元素
* 高效的查询方法，用来找到与CSS选择器匹配的文档元素集
* 一套有用的方法，用来操作选中的元素
* 强大的函数式编程技巧，用来批量操作元素集，而不是每次只操作单个
* 简洁的语言用法（链式调用），用来表示一系列顺序操作

## 基础

jQuery类库定义了一个全局函数：`jQuery()`。该函数使用频繁，因此在类库中还给它定义了一个快捷别名：`$`。这是jQuery在全局命名空间中定义的唯一两个变量。

`jQuery()` 是工厂函数，不是构造函数，它返回一个新创建的对象，但并没有和new关键字一起使用。

“jQuery函数”：jQuery函数指定义在jQuery命名空间中的函数，比如 `$.each(a,fn);` 。jQuery函数也可称为“静态方法”。

“jQuery方法”：jQuery方法是由jQuery函数返回的jQuery对象的方法，比如 `$("a").each(fn);`。jQuery类库最重要的部分就是它定义的这些强大的方法。

`$()` 的返回值是一个jQuery对象。jQuery对象是类数组。jQuery对象还有三个挺有趣的属性。`selector` 属性是创建jQuery对象时的选择器字符串（如果有的话）。`context` 属性是上下文对象，是传递给 `$()` 方法的第二参数，如果没有传递的话，默认是Document对象。最后，所有jQuery对象都有一个名为jquery的属性，检测该属性是否存在可以简单快捷地将jQuery对象与其他类数组对象区分开来。

## jQuery()函数

在jQuery类库中，最重要的方法是`jQuery()`方法（也就是 `$()` ）。它的功能很强大，有4种不同的调用方式。

第一种也是最常用的调用方式是传递CSS选择器（字符串）给 `$()` 方法。当通过这种方式调用时，`$()` 方法会返回当前文档中匹配该选择器的元素集。jQuery支持大部分CSS3选择器语法，还支持一些自己的扩展语法。还可以将一个元素或jQuery对象作为第二参数传递给 `$()` 方法，这时返回的是该特定元素或元素集的子元素中匹配选择器的部分。这第二参数是可选的，定义了元素查询的起始点，经常称为上下文（context）。

第二种调用方式是传递一个Element、Document或Window对象给 `$()` 方法。在这种情况下，`$()` 方法只须简单地将该Element、Document或Window对象封装成jQuery对象并返回。这样可以使得能用jQuery方法来操作这些元素而不用使用原生DOM方法。例如，在jQuery程序中，经常可以看见 `$(document)` 或 `$(this)`。jQuery对象可以表示文档中的多个元素，也可以传递一个元素数组给 `$()` 方法。在这种情况下，返回的jQuery对象表示该数组中的元素集。

第三种调用方式是传递HTML文本字符串给 `$()` 方法。在这种调用方式下，jQuery会根据传入的文本创建好HTML元素并封装为jQuery对象返回。jQuery不会将刚创建的元素自动插入文档中，可以使用jQuery方法来轻松地将元素插入想要的地方。注意：在这种调用方式下，不可传入纯文本，因为jQuery会把纯文本当成CSS选择器来解析。当使用这种调用风格时，传递给$()方法的字符串必须至少包含一个带有尖角括号的HTML标签。

通过第三种方式调用时，`$()` 接受可选的第二参数。可以传递Document对象来指定与所创建元素相关联的文档。（比如，当创建的元素需要插入iframe里时，需要显式指定该iframe的document对象。）第二参数还可以是object对象。此时，假设该对象的属性表示HTML属性的键/值对，这些属性将设置到所创建的对象上。当第二参数对象的属性名是"css"、"html"、"text"、"width"、"height"、"offset"、"val"或"data"，或者属性名是jQuery事件处理程序注册方法名时，jQuery将调用新创建元素上的同名方法，并传入属性值。
```js
var img=$(  "<img/>",//新建一个＜img＞元素
            {src:url,//具有HTML属性
 css:{borderWidth:5},//CSS样式
    click:handleClick//和事件处理程序
});
```
最后，第4种调用方式是传入一个函数给$()方法。此时，当文档加载完毕且DOM可操作时，传入的函数将被调用。
```js
jQuery(function(){//文档加载完毕时调用
  //所有jQuery代码放在这里
});
```
